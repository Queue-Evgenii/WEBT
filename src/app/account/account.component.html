<div class="account">
  <div class="account__container _container">
    <div class="account__form form">
      <h2 class="form__title">{{ hasAccount ? 'Authorisation' : 'Registration' }}</h2>
      <form class="form__body">
        <div
          *ngIf="!hasAccount" 
          [classList]="(user.errors.username.invalid && user.errors.username.dirty) ? '_invalid' : ''" 
        >
          <label for="username" class="form__label">Username</label>
          <input
            type="text"
            id="username"
            placeholder="Your name"
            [(ngModel)]="user.username"
            [ngModelOptions]="{standalone: true}"
            (blur)="user.validateUsername()"
          >
          <ul *ngIf="user.errors.username.invalid && user.errors.username.dirty">
            <li *ngIf="user.errors.username.invalid">{{ user.errors.username.errors.invalid }}</li>
            <li *ngIf="!user.errors.username.required">{{ user.errors.username.errors.required }}</li>
          </ul>
        </div>
        <div [classList]="(user.errors.email.invalid && user.errors.email.dirty && !hasAccount) ? '_invalid' : ''">
          <label for="email" class="form__label">E-Mail</label>
          <input
            type="email"
            id="email"
            placeholder="Your e-mail"
            [(ngModel)]="user.email"
            [ngModelOptions]="{standalone: true}"
            (blur)="user.validateEmail()"
          >
          <ul *ngIf="user.errors.email.invalid && user.errors.email.dirty && !hasAccount">
            <li *ngIf="user.errors.email.invalid">{{ user.errors.email.errors.invalid }}</li>
            <li *ngIf="!user.errors.email.required">{{ user.errors.email.errors.required }}</li>
            <li *ngIf="!user.errors.email.email">{{ user.errors.email.errors.email }}</li>
          </ul>
        </div>
        <div [classList]="(user.errors.password.invalid && user.errors.password.dirty && !hasAccount) ? '_invalid' : ''">
          <label for="password" class="form__label">Password</label>
          <input
            type="password"
            id="password"
            placeholder="Your password"
            [(ngModel)]="user.password"
            [ngModelOptions]="{standalone: true}"
            (blur)="user.validatePassword()"
          >
          <ul *ngIf="user.errors.password.invalid && user.errors.password.dirty && !hasAccount">
            <li *ngIf="user.errors.password.invalid">{{ user.errors.password.errors.invalid }}</li>
            <li *ngIf="!user.errors.password.required">{{ user.errors.password.errors.required }}</li>
          </ul>
        </div>
        <div>
          <button
            (click)="submitForm()"
            class="form__button _button"
          >
          {{ hasAccount ? "Log In" : "Sign Up" }}
          </button>
          <span *ngIf="error" class="form__label _ta-c _invalid">{{ error }}</span>
          <span (click)="hasAccount = !hasAccount" class="form__label _ta-c _pointer _hov-underline">
            {{ hasAccount ? "create account" : "already has account" }}
          </span>
        </div>
      </form>
    </div>
  </div>
</div>
